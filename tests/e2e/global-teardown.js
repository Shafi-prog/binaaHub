// ุชูุธูู ุจุนุฏ ุงุฎุชุจุงุฑุงุช E2E
module.exports = async () => {
  console.log('๐งน ุจุฏุก ุชูุธูู ุงุฎุชุจุงุฑุงุช E2E...');
  
  // ุชูุธูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ
  await cleanupTestData();
  
  // ุฅููุงู ุฎุงุฏู ุงูุชุทููุฑ ุฅุฐุง ูุงู ุชู ุจุฏุคู ูู ูุจู ุงูุงุฎุชุจุงุฑุงุช
  await stopDevServer();
  
  console.log('โ ุชู ุชูุธูู ุงุฎุชุจุงุฑุงุช E2E ุจูุฌุงุญ');
};

async function cleanupTestData() {
  try {
    console.log('๐๏ธ ุชูุธูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ...');
    
    // ุชูุธูู ุงููุณุชุฎุฏููู ุงูุชุฌุฑูุจููู
    // ุชูุธูู ุงูุทูุจุงุช ุงูุชุฌุฑูุจูุฉ
    // ุชูุธูู ุงููุดุงุฑูุน ุงูุชุฌุฑูุจูุฉ
    
    // ูููู ุฅุถุงูุฉ ุงุณุชุฏุนุงุกุงุช API ููุชูุธูู ููุง
    
    console.log('โ ุชู ุชูุธูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ');
  } catch (error) {
    console.warn('โ๏ธ ุชุญุฐูุฑ: ูุดู ูู ุชูุธูู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ:', error.message);
  }
}

async function stopDevServer() {
  const serverPid = process.env.DEV_SERVER_PID;
  
  if (serverPid) {
    try {
      console.log('๐ ุฅููุงู ุฎุงุฏู ุงูุชุทููุฑ...');
      process.kill(parseInt(serverPid), 'SIGTERM');
      console.log('โ ุชู ุฅููุงู ุฎุงุฏู ุงูุชุทููุฑ');
    } catch (error) {
      console.warn('โ๏ธ ุชุญุฐูุฑ: ูุดู ูู ุฅููุงู ุฎุงุฏู ุงูุชุทููุฑ:', error.message);
    }
  }
}

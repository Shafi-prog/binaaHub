(()=>{var e={};e.id=2001,e.ids=[2001],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59473:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>p});var a=r(96559),n=r(48088),o=r(37719),i=r(32190),u=r(98350);async function c(e){try{let t,{searchParams:r}=new URL(e.url),s=r.get("type"),a=r.get("format")||"json",n=r.get("startDate"),o=r.get("endDate"),c=r.get("storeId");if(!s)return i.NextResponse.json({error:"Report type is required"},{status:400});if(!c)return i.NextResponse.json({error:"Store ID is required"},{status:400});let p={startDate:n||void 0,endDate:o||void 0,format:a};switch(s){case"sales":t=await u.V.generateSalesReport(p);break;case"inventory":t=await u.V.generateInventoryReport({...p,includeValuation:"true"===r.get("includeValuation"),lowStockOnly:"true"===r.get("lowStockOnly")});break;case"customers":t=await u.V.generateCustomerReport({...p,includeTransactions:"true"===r.get("includeTransactions"),activeOnly:"true"===r.get("activeOnly")});break;case"profitability":t=await u.V.generateProfitabilityReport({...p,groupBy:r.get("groupBy")});break;case"performance":t=await u.V.generatePerformanceReport(p);break;case"taxes":t=await u.V.generateTaxReport({...p,taxType:r.get("taxType")});break;default:return i.NextResponse.json({error:`Unknown report type: ${s}`},{status:400})}if("csv"===a&&"string"==typeof t)return new i.NextResponse(t,{headers:{"Content-Type":"text/csv","Content-Disposition":`attachment; filename="${s}-report-${new Date().toISOString().split("T")[0]}.csv"`}});return i.NextResponse.json(t)}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Failed to generate report"},{status:500})}}async function p(e){try{let t,{reportType:r,options:s,storeId:a}=await e.json();if(!r||!a)return i.NextResponse.json({error:"Report type and store ID are required"},{status:400});switch(r){case"sales":t=await u.V.generateSalesReport(s);break;case"inventory":t=await u.V.generateInventoryReport(s);break;case"customers":t=await u.V.generateCustomerReport(s);break;case"profitability":t=await u.V.generateProfitabilityReport(s);break;case"performance":t=await u.V.generatePerformanceReport(s);break;case"taxes":t=await u.V.generateTaxReport(s);break;default:return i.NextResponse.json({error:`Unknown report type: ${r}`},{status:400})}return i.NextResponse.json({success:!0,report:t})}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Failed to generate report"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/erp/reports/route",pathname:"/api/erp/reports",filename:"route",bundlePath:"app/api/erp/reports/route"},resolvedPagePath:"C:\\Users\\hp\\BinnaCodes\\binna\\src\\app\\api\\erp\\reports\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:y,serverHooks:m}=l;function h(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:y})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{},98350:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});let s=(0,r(61223).createClientComponentClient)();class a{constructor(){this.baseUrl=process.env.NEXT_PUBLIC_ERP_API_URL||"http://localhost:8000",this.apiKey=process.env.ERP_API_KEY}async makeRequest(e,t={}){let r=`${this.baseUrl}${e}`,s={"Content-Type":"application/json",...this.apiKey&&{Authorization:`Bearer ${this.apiKey}`},...t.headers};try{let e=await fetch(r,{...t,headers:s});if(!e.ok)throw Error(`ERP API error! status: ${e.status}`);return await e.json()}catch(r){return this.fallbackToSupabase(e,t)}}async fallbackToSupabase(e,t){return null}async getCustomers(e=50,t=0){try{return await this.makeRequest(`/api/customers?limit=${e}&offset=${t}`)||{customers:[],total:0}}catch(e){return{customers:[],total:0}}}async getCustomer(e){try{let t=await this.makeRequest(`/api/customers/${e}`);return t?.customer||null}catch(e){return null}}async createCustomer(e){try{let t=await this.makeRequest("/api/customers",{method:"POST",body:JSON.stringify(e)});return t?.customer||null}catch(e){return null}}async updateCustomer(e,t){try{let r=await this.makeRequest(`/api/customers/${e}`,{method:"PUT",body:JSON.stringify(t)});return r?.customer||null}catch(e){return null}}async getProducts(e=50,t=0){try{return await this.makeRequest(`/api/products?limit=${e}&offset=${t}`)||{products:[],total:0}}catch(e){return{products:[],total:0}}}async getProduct(e){try{let t=await this.makeRequest(`/api/products/${e}`);return t?.product||null}catch(e){return null}}async updateProductStock(e,t){try{return await this.makeRequest(`/api/products/${e}/stock`,{method:"PUT",body:JSON.stringify({quantity:t})}),!0}catch(e){return!1}}async getInvoices(e=50,t=0){try{return await this.makeRequest(`/api/invoices?limit=${e}&offset=${t}`)||{invoices:[],total:0}}catch(e){return{invoices:[],total:0}}}async getInvoice(e){try{let t=await this.makeRequest(`/api/invoices/${e}`);return t?.invoice||null}catch(e){return null}}async createInvoice(e){try{let t=await this.makeRequest("/api/invoices",{method:"POST",body:JSON.stringify(e)});return t?.invoice||null}catch(e){return null}}async updateInvoiceStatus(e,t){try{return await this.makeRequest(`/api/invoices/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})}),!0}catch(e){return!1}}async getAnalytics(){try{let e=await this.makeRequest("/api/analytics");return e?.analytics||this.getMockAnalytics()}catch(e){return this.getMockAnalytics()}}getMockAnalytics(){return{revenue:{total:125e3,monthly:[{month:"2024-01",amount:45e3},{month:"2024-02",amount:38e3},{month:"2024-03",amount:42e3}],growth_rate:12.5},customers:{total:150,new_this_month:12,top_customers:[{id:"1",name:"Acme Corp",total_spent:25e3},{id:"2",name:"Tech Solutions",total_spent:18e3},{id:"3",name:"Global Industries",total_spent:15e3}]},products:{total:250,low_stock_count:15,top_selling:[{id:"1",name:"Premium Widget",quantity_sold:450},{id:"2",name:"Standard Component",quantity_sold:380},{id:"3",name:"Deluxe Package",quantity_sold:220}]},invoices:{total:89,paid:65,overdue:8,pending:16}}}async syncToSupabase(){try{let{customers:e}=await this.getCustomers(1e3);if(e.length>0){let{error:t}=await s.from("erp_customers").upsert(e.map(e=>({erp_id:e.id,name:e.name,email:e.email,phone:e.phone,company:e.company,status:e.status,sync_updated_at:new Date().toISOString()})),{onConflict:"erp_id"})}let{products:t}=await this.getProducts(1e3);if(t.length>0){let{error:e}=await s.from("erp_products").upsert(t.map(e=>({erp_id:e.id,sku:e.sku,name:e.name,category:e.category,unit_price:e.unit_price,stock_quantity:e.stock_quantity,status:e.status,sync_updated_at:new Date().toISOString()})),{onConflict:"erp_id"})}return!0}catch(e){return!1}}}let n=new a}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,580,9398,1223],()=>r(59473));module.exports=s})();
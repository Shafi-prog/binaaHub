(()=>{var e={};e.id=2393,e.ids=[2393],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16763:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>x,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{POST:()=>c});var u=t(96559),a=t(48088),i=t(37719),o=t(32190),n=t(39398);async function c(e){try{let{email:r,password:t,accountType:s}=await e.json(),u="https://lqhopwohuddhapkhhikf.supabase.co",a=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!u||!a)return o.NextResponse.json({success:!1,error:"Server configuration error"},{status:500});let i=(0,n.createClient)(u,a,{auth:{autoRefreshToken:!1,persistSession:!1}}),{data:c}=await i.from("users").select("*").eq("email",r).single();if(c)return o.NextResponse.json({success:!1,error:"User already exists"},{status:400});let{data:p,error:d}=await i.auth.admin.createUser({email:r,password:t,email_confirm:!0});if(d||!p.user)return o.NextResponse.json({success:!1,error:d?.message||"Failed to create account"},{status:400});let l={id:p.user.id,email:r,account_type:s||"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:x}=await i.from("users").insert([l]);if(x)return await i.auth.admin.deleteUser(p.user.id),o.NextResponse.json({success:!1,error:"Failed to create user profile"},{status:500});return o.NextResponse.json({success:!0,user:{id:p.user.id,email:p.user.email,account_type:s||"user"}})}catch(e){return o.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let p=new u.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/auth/create-user/route",pathname:"/api/auth/create-user",filename:"route",bundlePath:"app/api/auth/create-user/route"},resolvedPagePath:"C:\\Users\\hp\\BinnaCodes\\binna\\src\\app\\api\\auth\\create-user\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:x}=p;function h(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=51906,e.exports=r},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4243,580,9398],()=>t(16763));module.exports=s})();
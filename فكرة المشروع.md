# BinnaV2 Platform - Comprehensive Documentation

## 1. **فكرة المنصة (Platform Concept)**

منصة **BinnaV2** نظام متكامل لإدارة عمليات البناء بشكل ذكي مع جعل المشروع هو المحور الأساسي. تشمل المنصة:

- إدارة المشاريع بمراحلها المختلفة.
- سوق متكامل للمنتجات والخدمات (Marketplace).
- عقود إلكترونية وجدولة دفعات.
- محفظة إلكترونية ونظام إحالة.
- لوحة تحكم ديناميكية للأدوار المتعددة (مستخدم، مشرف، متجر، شركة خدمات).
- ERP متكامل للمتاجر والشركات.
- تقارير ختامية ذكية مدعومة بالذكاء الاصطناعي.

---

## 2. **آلية التسجيل والأدوار**

### **2.1 التسجيل في الموقع**

- الدخول لصفحة التسجيل.
- إدخال البيانات الأساسية: الاسم، البريد الإلكتروني، الهاتف، كلمة المرور.
- اختيار الدور أو الأدوار:
  - **مالك مشروع**: لإنشاء المشاريع وإدارتها.
  - **مشرف / مقاول / عامل**: للبحث عن أعمال إشراف أو تنفيذ.
  - **متجر / شركة خدمات**: لتقديم منتجات أو خدمات (خرسانة، عزل، تأمين).
- المتاجر والشركات ترفع المستندات المطلوبة للتحقق.
- بعد المراجعة يتم تفعيل الحساب.

### **2.2 الأدوار المتعددة للمستخدم**

- يمكن للمستخدم أن يكون مالك مشروع وأيضًا مشرفًا أو عاملاً.
- المشرف يمكنه إدارة مشروعه الخاص وشراء منتجات من السوق.
- المستخدم الذي يسجل كمتجر أو مزود خدمة يحصل على لوحة ERP لإدارة الطلبات والمبيعات.

---

## 3. **إنشاء المشروع وإدارته**

### **3.1 إنشاء مشروع جديد**

- من لوحة التحكم → **المشاريع**.
- إدخال تفاصيل: اسم المشروع، الموقع، الميزانية، مراحل البناء.
- عند الإنشاء يتم تفعيل التبويبات:
  - المراحل.
  - الفريق.
  - المصاريف.
  - العقود.

### **3.2 إدارة المراحل**

- لكل مرحلة تبويب خاص.
- رفع صور، إضافة ملاحظات.
- نصائح ذكاء اصطناعي لكل مرحلة.

### **3.3 إدارة الفريق**

- إضافة مشرف، مقاول، عمال.
- إنشاء عقود إلكترونية تشمل البنود، الدفعات، التوقيع.

---

## 4. **السوق وعمليات الشراء (مع مخطط التدفق)**

### **4.1 خطوات العملية**

1. المستخدم يختار المنتج أو الخدمة من Marketplace.
2. يضيف المنتج إلى سلة الطلبات ويؤكد الطلب.
3. الطلب ينتقل إلى لوحة تحكم المتجر (ERP).
4. المتجر يراجع الطلب ويؤكده.
5. يظهر الطلب في **قائمة المبيعات لدى المتجر**.
6. بعد الشحن والتسليم:
   - يتم تسجيل الفاتورة تلقائيًا في قسم **المصاريف**.
   - إذا كان المنتج بضمان → يضاف في قسم **Documents**.

### **4.2 مميزات ERP للمتاجر ومقدمي الخدمات**

- إدارة المنتجات والمخزون.
- متابعة الطلبات (طلبات جديدة، طلبات مؤكدة، مبيعات).
- إضافة الضمانات والفواتير.
- تتبع الأداء المالي والتقارير.
- البحث عن العملاء المسجلين للترويج أو تقديم عروض.

---

## 5. **مخطط تدفق العملية (Flowchart)**

```
[المستخدم] → [اختيار منتج/خدمة] → [إرسال الطلب] → [لوحة ERP للمتجر]
[المتجر يؤكد الطلب] → [يضاف لسجل المبيعات] → [توصيل المنتج]
[تسليم] → [تسجيل الفاتورة في المصاريف + الضمان في الوثائق]
```

---

## 6. **مخطط تفاعلي شامل للأدوار (Interactive Roles Flow)**

```
[المستخدم (مالك مشروع)] → [ينشئ مشروع] → [إدارة المراحل] → [شراء منتجات/خدمات]
     ↓                                    ↓
[المشرف/المقاول] ← [إضافة في الفريق] ← [العقود وجدولة الدفعات]
     ↓                                    ↓
[Marketplace] → [متاجر] → [تأكيد الطلب] → [ERP: سجل المبيعات + تحديث المخزون]
     ↓                                    ↓
[Finance] ← [تسجيل المصاريف تلقائيًا] ← [إضافة الضمانات في Documents]
```

---

## 7. **التقرير الختامي للمشروع (Final Report)**

### **آلية الإنشاء**

- عند اكتمال جميع المراحل وتأكيد التسليمات يتم تفعيل خيار **إنشاء التقرير الختامي**.
- يتم جمع البيانات تلقائيًا من جميع الأقسام:
  - بيانات المشروع (الاسم، المالك، الموقع، الميزانية النهائية).
  - صور المراحل مرتبة حسب التسلسل الزمني.
  - تفاصيل العقود مع المشرفين والمقاولين.
  - قائمة المصاريف والفواتير المرتبطة بكل عملية شراء.
  - الضمانات للمنتجات والخدمات.
  - تفاصيل الشركات والمتاجر التي تم التعامل معها.

### **التنسيق**

- التقرير يتم إنشاؤه بصيغة PDF مع واجهة مخصصة للطباعة أو التحميل.
- إمكانية مشاركة التقرير عبر البريد أو رابط آمن.

---

## 8. **ترابط الأقسام وتدفق العمليات**

1. المستخدم يسجل ويحدد أدواره.
2. ينشئ مشروع.
3. يضيف فريق العمل ويبرم العقود.
4. يشتري منتجات من السوق → الطلب يذهب للمتجر.
5. المتجر يؤكد ويشحن، ويظهر الطلب في سجل المبيعات.
6. عند التسليم:
   - يتم تحديث المصاريف.
   - يتم حفظ الضمانات.
   - يتم تعديل حالة المرحلة.
7. عند اكتمال المشروع:
   - يتم إنشاء التقرير النهائي تلقائيًا.

---

## 9. **البحث والتفاعل بين الأدوار**

- المتاجر ومقدمو الخدمات يمكنهم البحث عن عملاء مسجلين (للترويج أو تقديم عروض).
- المستخدم يمكنه البحث عن متاجر وخدمات محددة.
- المشرف أو العامل يمكنه عرض خدماته والتقدم للمشاريع.

---

## 10. **البنية التقنية (DDD Structure)**

```
binnav2-new/
└── src/
    ├── shared/
    │   ├── kernel/
    │   ├── utils/
    │   ├── ui/
    │   ├── infrastructure/
    │   └── security/
    │
    ├── domains/
    │   ├── project/
    │   ├── marketplace/
    │   ├── store-management/
    │   ├── workforce/
    │   ├── insurance/
    │   ├── finance/
    │   └── user-management/
    │
    ├── apps/
    │   ├── web/
    │   │   ├── pages/
    │   │   └── dashboard/components/Tabs/
    │   ├── admin/
    │   └── mobile/
    │
    └── configs/
```

---

## 11. **التبويبات داخل لوحة التحكم الديناميكية**

- **ProjectsTab** → المشاريع والمراحل.
- **MarketplaceTab** → المنتجات والخدمات.
- **FinanceTab** → المصاريف والمحفظة.
- **WorkforceTab** → الإشراف والعمالة.
- **StoreTab** → ERP للمتاجر والخدمات (تشمل المبيعات).
- **SettingsTab** → الإعدادات.

---

## 12. **خطة تقليل عدد الصفحات**

| القسم القديم     | العدد السابق | بعد الدمج           |
| ---------------- | ------------ | ------------------- |
| Public Pages     | 11           | 4 Tabs + 2 Pages    |
| Dashboards       | 6            | 1 Dynamic Dashboard |
| Store Management | 79           | 5 Tabs              |
| User Pages       | 44           | 6 Tabs              |

الإجمالي: من 163 → **حوالي 60 صفحة**.

